<!DOCTYPE html>
<html>
<head>
	<title>Jō | BJMNS</title>
	<meta charset="UTF-8">
<head>
<body>
	<!-- Jō 0.3 - "Friend or Enemy?"
		New:
			New character mechanics
			Player now considered a character; var global replaced with player's global coords
			Chests use character mechanics
			Preliminary HUD with Player health support through <meter>
			Detached items from inventory
			F - new fullscreen key
			Fixed Webkit CSS transitions
			Fixed item sprites for Safari
			"Screenshot" added to menu
			Redid "walkable" code (including insideNPC code and the localCharacterList and walkMap arrays) to allow for global walkable(c,g)? checks. Simplified code for changing area, generateWalkMap now only called in init() (removed from setGlobalPosition(), assumes that tileMap and structureMap will not change)
			Used 1rem = 1vw to implement border-width in terms of vw (not directly supported by Webkit) and allow playability on older browsers (by previously setting 1rem = 10px)
			Shortened transitions from .75s to .5s
			Implemented function afterText() to allow multi-page text, post receive() text/code, etc.
			Implemented var pause
			Changed #text[data-state="out"] to 20rem (assumes text.innerHTML = "" when text.dataset.state = "out";

		Issues:
			Webkit browsers are blurry (no crisp-edges support)
			Opera doesn't work (no requestAnimationFrame support)
			Weird initial CSS transition with Webkit browsers
			Webkit doesn't support resizing (result of 1rem = 1vw hack)
	-->
	<div id="gameWindow">
		<canvas id="overworld" width="256" height="160">Canvas Required!</canvas>
		<div id="HUD" class="overlay" data-state="out">
			<meter id="health" min="0" max="3" low="3" optimum="3" value="3">3/3</meter>
		</div>
		<div id="darken" class="overlay" data-state="out"></div>
		<div id="text" class="overlay" data-state="out"></div>
		<div id="inventory" class="overlay" data-state="out">
			<h1>Inventory:</h1>
			<table>
				<tr>
					<td id="boomerang"></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td id="glitch"></td>
				</tr>
			</table>
		</div>
		<div id="items" class="overlay" data-state="out">
			<div id="xSlot"></div>
			<div id="zSlot"></div>
		</div>
		<canvas id="map" class="overlay" data-state="out">Canvas Still Required!</canvas>
		<div id="video" class="overlay" data-state="out"></div>
		<div id="menu" class="overlay" data-state="out">
			<h1>Game Paused</h1>
			<p><a id="save" href="data:," download="save.txt">Save (Unimplemented)</a></p>
			<p><a id="screenshot" href="data:," download="screenshot.png">Screenshot</a></p>
			<p id="quit">Quit (Unimplemented)</p>
		</div>
	</div>
	<footer><p>All elements of this game - including those of character, story, code, and images - were created by Benjamin Shoemake and are licensed under a <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons 3.0 Attribution License</a>.</p></footer>
	<style>
		html {
			font-size: 10px;
			font-size: .9vw;
		}
		body {
			background: black;
			overflow: hidden;
			image-rendering: -moz-crisp-edges;
			image-rendering: -o-crisp-edges;
			image-rendering: -webkit-optimize-contrast;
			image-rendering: crisp-edges;
			-ms-interpolation-mode: nearest-neighbor;
		}
		h1 {
			font-size: 2.5rem;
			line-height: 1;
			margin: 1.75rem;
		}
		p {
			font-size: 1.25rem;
		}
		table {
			background: black;
			border: black .25rem inset;
			margin: 2.75rem auto;
			table-layout: fixed;
			width: 60rem;
			border-spacing: 0;
		}
		td {
			border: #4F4F4F .375em groove;
			width: 4.25rem;
			height: 4.25rem;
		}
		td[data-equipped="x"] {
			border: #87372F .375rem ridge;
		}
		td[data-equipped="z"] {
			border: #47979F .375rem ridge;
		}
		tr {
			background: #777;
		}
		[data-item="boomerang"] {
			background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEUGRBAAK1cXS3dHl581%2BBrZAAAAAXRSTlMAQObYZgAAAERJREFUCNdjYGBgsABihhdAzDwDSPBFAImfCUDe0wYGBv5pQJ5VFJB4mQEkli5gYGCaBhTnAglZgoRUgTwGNZARGkAMAPWuC8LY74A%2FAAAAAElFTkSuQmCC') no-repeat!important;
			background-size: contain!important;
		}
		[data-item="glitch"] {
			background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAFVBMVEVvcm0AAAB%2FHzkHYyOLP5erc0lHl58NHuUkAAAAAXRSTlMAQObYZgAAAE5JREFUCNdjEBQUZGBgABKCgkpKSmCGC5Dh4uKIm%2BHAwJYGZYSGpqWIQBkJgqGhoSBGWhqEkWxsbIrKEIYwBAWRGWYuLgyCQsrGxiYuLgDg%2Bxs16PdZCgAAAABJRU5ErkJggg%3D%3D') no-repeat!important;
			background-size: contain!important;
		}
		blockquote {
			padding: 2rem;
			background: #AB7349;
			border: #574300 medium inset;
			text-align: justify;
			font-size: 1.25rem;
		}
		footer {
			color: white;
			margin: 3% auto 0;
			width: 85%;
			text-align: center;
			animation-duration: 7s;
			animation-name: fade;
			animation-delay: 3s;
			animation-fill-mode: forwards;
			-webkit-animation-duration: 7s;
			-webkit-animation-name: fade;
			-webkit-animation-delay: 3s;
			-webkit-animation-fill-mode: forwards;
		}
		footer p {
			font-size: 1rem;
		}
		footer a {
			color: lightgrey;
		}
		@keyframes fade {
			from {opacity:1;}
			to {opacity:0;}
		}
		@-webkit-keyframes fade {
			from {opacity:1;}
			to {opacity:0;}
		}
		#gameWindow {
			position: relative;
			background: #7F1F39;
			margin: 2% auto;
			width: 80rem;
			height: 50rem;
			overflow: hidden;
		}
		#overworld {
			width: 100%;
			height: 50rem;
		}
		#health {
			width: 50%;
			margin: 0 1rem;
		}
		#zSlot, #xSlot {
			width: 5rem;
			height: 5rem;
			float: right;
			margin: 0 0 0 1.8rem;
			opacity: .9;
		}
		#zSlot {
			border: #47979F .5rem groove;
		}
		#xSlot {
			border: #87372F .5rem groove;
		}
		.overlay {
			position: absolute;
			transition: right .5s ease-in-out, top .5s ease-in-out, left .5s ease-in-out, bottom .5s ease-in-out, opacity .25s ease-in-out;
			-webkit-transition: right .75s ease-in-out, top .75s ease-in-out, left .75s ease-in-out, bottom .75s ease-in-out, opacity .5s ease-in-out;
			overflow-x: hidden;
			overflow-y: auto;
		}
		#HUD {
			top: 1.25rem;
			left: 2rem;
			width: 77.5rem;
			text-align: center;
		}
		#HUD[data-state="out"], #darken[data-state="out"], #items[data-state="out"] {
			opacity: 0;
		}
		#HUD[data-state="in"], #darken[data-state="in"], #items[data-state="in"] {
			opacity: 1;
		}
		#darken {
			top: 0rem;
			left: 0rem;
			width: 80rem;
			height: 50rem;
			background: rgba(0,0,0,.5);
		}
		#text {
			background: rgba(203,195,95,.9);
			left: 4rem;
			width: 67rem;
			max-height: 40rem;
			padding: 2.5rem;
			text-align: center;
		}
		#text[data-state="out"] {
			bottom: -20rem;
		}
		#text[data-state="in"] {
			bottom: 2.5rem;
		}
		#inventory {
			background: #777;
			top: 2.5rem;
			width: 70rem;
			width: calc(70rem - 10px);
			width: -webkit-calc(70rem - 10px);
			height: 45rem;
			height: calc(43rem - 10px);
			height: -webkit-calc(43rem - 10px);
			padding: 1rem;
			border: #4F4F4F 5px outset;
		}
		#inventory[data-state="out"] {
			left: 84rem;
		}
		#inventory[data-state="in"] {
			left: 4rem;
		}
		#items {
			top: 2.5rem;
			right: 4rem;
			width: 25%;
			border: transparent 5px outset;
			padding: 1rem 3.5rem;
		}
		#map {
			background: black;
			left: 4rem;
			width: 72rem;
			height: 45rem;
		}
		#map[data-state="out"] {
			bottom: 57.5rem;
		}
		#map[data-state="in"] {
			bottom: 2.5rem;
		}
		#menu {
			background: #CBC35F;
			top: 0rem;
			width: 12rem;
			height: 46rem;
			padding: 2rem;
			text-align: center;
		}
		#menu p, a {
			text-decoration: none;
			color: black;
		}
		#menu p:hover, a:hover {
			color: white;
			cursor: pointer;
		}
		#menu[data-state="out"] {
			right: 80rem;
		}
		#menu[data-state="in"] {
			right: 64rem;
		}
		#video {
			left: 0rem;
			width: 80rem;
			height: 50rem;
		}
		#video[data-state="out"] {
			top: 50rem;
		}
		#video[data-state="in"] {
			top: 0rem;
		}
	</style>
	<script src="textures.js" type="text/javascript"></script>
	<script src="script.js" type="text/javascript"></script>
</body>
